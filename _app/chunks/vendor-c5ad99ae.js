var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,c=(t,e)=>{for(var n in e||(e={}))o.call(e,n)&&a(t,n,e[n]);if(r)for(var n of r(e))i.call(e,n)&&a(t,n,e[n]);return t};function l(){}function u(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function f(){return Object.create(null)}function d(t){t.forEach(s)}function p(t){return"function"==typeof t}function m(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let h;function b(t,e){return h||(h=document.createElement("a")),h.href=e,t===h.href}function y(t,e,n,r){if(t){const o=g(t,e,n,r);return t[0](o)}}function g(t,e,n,r){return t[1]&&r?u(n.ctx.slice(),t[1](r(e))):n.ctx}function v(t,e,n,r,o,i,a){const c=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(c){const o=g(e,n,r,a);t.p(o,c)}}function _(t){return null==t?"":t}let j,$=!1;function w(t,e,n,r){for(;t<e;){const o=t+(e-t>>1);n(o)<=r?t=o+1:e=o}return t}function x(t,e){if($){for(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if("HEAD"===t.nodeName){const t=[];for(let n=0;n<e.length;n++){const r=e[n];void 0!==r.claim_order&&t.push(r)}e=t}const n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let o=0;for(let l=0;l<e.length;l++){const t=e[l].claim_order,i=(o>0&&e[n[o]].claim_order<=t?o+1:w(1,o,(t=>e[n[t]].claim_order),t))-1;r[l]=n[i]+1;const a=i+1;n[a]=l,o=Math.max(a,o)}const i=[],a=[];let c=e.length-1;for(let l=n[o]+1;0!=l;l=r[l-1]){for(i.push(e[l-1]);c>=l;c--)a.push(e[c]);c--}for(;c>=0;c--)a.push(e[c]);i.reverse(),a.sort(((t,e)=>t.claim_order-e.claim_order));for(let l=0,u=0;l<a.length;l++){for(;u<i.length&&a[l].claim_order>=i[u].claim_order;)u++;const e=u<i.length?i[u]:null;t.insertBefore(a[l],e)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);null!==t.actual_end_child&&void 0===t.actual_end_child.claim_order;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?void 0===e.claim_order&&e.parentNode===t||t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else e.parentNode!==t&&t.appendChild(e)}function k(t,e,n){$&&!n?x(t,e):e.parentNode===t&&e.nextSibling==n||t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function O(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function S(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function I(){return T(" ")}function L(){return T("")}function N(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function P(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function M(t){return Array.from(t.childNodes)}function B(t,e,n,r,o=!1){!function(t){void 0===t.claim_info&&(t.claim_info={last_index:0,total_claimed:0})}(t);const i=(()=>{for(let r=t.claim_info.last_index;r<t.length;r++){const i=t[r];if(e(i)){const e=n(i);return void 0===e?t.splice(r,1):t[r]=e,o||(t.claim_info.last_index=r),i}}for(let r=t.claim_info.last_index-1;r>=0;r--){const i=t[r];if(e(i)){const e=n(i);return void 0===e?t.splice(r,1):t[r]=e,o?void 0===e&&t.claim_info.last_index--:t.claim_info.last_index=r,i}}return r()})();return i.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,i}function F(t,e,n,r){return B(t,(t=>t.nodeName===e),(t=>{const e=[];for(let r=0;r<t.attributes.length;r++){const o=t.attributes[r];n[o.name]||e.push(o.name)}e.forEach((e=>t.removeAttribute(e)))}),(()=>r?S(e):E(e)))}function q(t,e){return B(t,(t=>3===t.nodeType),(t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n}),(()=>T(e)),!0)}function C(t){return q(t," ")}function H(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function D(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function U(t,e=document.body){return Array.from(e.querySelectorAll(t))}function z(t){j=t}function G(){if(!j)throw new Error("Function called outside component initialization");return j}function R(t){G().$$.on_mount.push(t)}function W(t){G().$$.after_update.push(t)}function J(t,e){G().$$.context.set(t,e)}const K=[],Q=[],V=[],X=[],Y=Promise.resolve();let Z=!1;function tt(t){V.push(t)}let et=!1;const nt=new Set;function rt(){if(!et){et=!0;do{for(let t=0;t<K.length;t+=1){const e=K[t];z(e),ot(e.$$)}for(z(null),K.length=0;Q.length;)Q.pop()();for(let t=0;t<V.length;t+=1){const e=V[t];nt.has(e)||(nt.add(e),e())}V.length=0}while(K.length);for(;X.length;)X.pop()();Z=!1,et=!1,nt.clear()}}function ot(t){if(null!==t.fragment){t.update(),d(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(tt)}}const it=new Set;let at;function ct(){at={r:0,c:[],p:at}}function lt(){at.r||d(at.c),at=at.p}function ut(t,e){t&&t.i&&(it.delete(t),t.i(e))}function st(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),at.c.push((()=>{it.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const ft="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function dt(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const a=t[i],c=e[i];if(c){for(const t in a)t in c||(r[t]=1);for(const t in c)o[t]||(n[t]=c[t],o[t]=1);t[i]=c}else for(const t in a)o[t]=1}for(const a in r)a in n||(n[a]=void 0);return n}function pt(t){return"object"==typeof t&&null!==t?t:{}}function mt(t){t&&t.c()}function ht(t,e){t&&t.l(e)}function bt(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:a,after_update:c}=t.$$;o&&o.m(e,n),r||tt((()=>{const e=i.map(s).filter(p);a?a.push(...e):d(e),t.$$.on_mount=[]})),c.forEach(tt)}function yt(t,e){const n=t.$$;null!==n.fragment&&(d(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){-1===t.$$.dirty[0]&&(K.push(t),Z||(Z=!0,Y.then(rt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(t,e,n,r,o,i,a,c=[-1]){const u=j;z(t);const s=t.$$={fragment:null,ctx:null,props:i,update:l,not_equal:o,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:e.context||[]),callbacks:f(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};a&&a(s.root);let p=!1;if(s.ctx=n?n(t,e.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return s.ctx&&o(s.ctx[e],s.ctx[e]=i)&&(!s.skip_bound&&s.bound[e]&&s.bound[e](i),p&&gt(t,e)),n})):[],s.update(),p=!0,d(s.before_update),s.fragment=!!r&&r(s.ctx),e.target){if(e.hydrate){$=!0;const t=M(e.target);s.fragment&&s.fragment.l(t),t.forEach(A)}else s.fragment&&s.fragment.c();e.intro&&ut(t.$$.fragment),bt(t,e.target,e.anchor,e.customElement),$=!1,rt()}z(u)}class _t{$destroy(){yt(this,1),this.$destroy=l}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const jt=[];function $t(t,e=l){let n;const r=new Set;function o(e){if(m(t,e)&&(t=e,n)){const e=!jt.length;for(const n of r)n[1](),jt.push(n,t);if(e){for(let t=0;t<jt.length;t+=2)jt[t][0](jt[t+1]);jt.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(i,a=l){const c=[i,a];return r.add(c),1===r.size&&(n=e(o)||l),i(t),()=>{r.delete(c),0===r.size&&(n(),n=null)}}}}var wt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var xt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},kt=Math.floor,At=Math.random;var Ot=function(t,e){return t+kt(At()*(e-t+1))};var Et=function(t,e){var n=-1,r=t.length,o=r-1;for(e=void 0===e?r:e;++n<e;){var i=Ot(n,o),a=t[i];t[i]=t[n],t[n]=a}return t.length=e,t},St=xt,Tt=Et;var It=function(t){return Tt(St(t))};var Lt=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o};var Nt=function(t,e){return Lt(e,(function(e){return t[e]}))};var Pt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Mt="object"==typeof wt&&wt&&wt.Object===Object&&wt,Bt=Mt,Ft="object"==typeof self&&self&&self.Object===Object&&self,qt=Bt||Ft||Function("return this")(),Ct=qt.Symbol,Ht=Ct,Dt=Object.prototype,Ut=Dt.hasOwnProperty,zt=Dt.toString,Gt=Ht?Ht.toStringTag:void 0;var Rt=function(t){var e=Ut.call(t,Gt),n=t[Gt];try{t[Gt]=void 0;var r=!0}catch(i){}var o=zt.call(t);return r&&(e?t[Gt]=n:delete t[Gt]),o},Wt=Object.prototype.toString;var Jt=Rt,Kt=function(t){return Wt.call(t)},Qt=Ct?Ct.toStringTag:void 0;var Vt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Qt&&Qt in Object(t)?Jt(t):Kt(t)};var Xt=function(t){return null!=t&&"object"==typeof t},Yt=Vt,Zt=Xt;var te,ee,ne,re,oe,ie,ae,ce,le=function(t){return Zt(t)&&"[object Arguments]"==Yt(t)},ue=Xt,se=Object.prototype,fe=se.hasOwnProperty,de=se.propertyIsEnumerable,pe=le(function(){return arguments}())?le:function(t){return ue(t)&&fe.call(t,"callee")&&!de.call(t,"callee")},me=Array.isArray,he={exports:{}};te=he,ne=qt,re=function(){return!1},oe=(ee=he.exports)&&!ee.nodeType&&ee,ie=oe&&te&&!te.nodeType&&te,ae=ie&&ie.exports===oe?ne.Buffer:void 0,ce=(ae?ae.isBuffer:void 0)||re,te.exports=ce;var be=/^(?:0|[1-9]\d*)$/;var ye=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&be.test(t))&&t>-1&&t%1==0&&t<e};var ge=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ve=Vt,_e=ge,je=Xt,$e={};$e["[object Float32Array]"]=$e["[object Float64Array]"]=$e["[object Int8Array]"]=$e["[object Int16Array]"]=$e["[object Int32Array]"]=$e["[object Uint8Array]"]=$e["[object Uint8ClampedArray]"]=$e["[object Uint16Array]"]=$e["[object Uint32Array]"]=!0,$e["[object Arguments]"]=$e["[object Array]"]=$e["[object ArrayBuffer]"]=$e["[object Boolean]"]=$e["[object DataView]"]=$e["[object Date]"]=$e["[object Error]"]=$e["[object Function]"]=$e["[object Map]"]=$e["[object Number]"]=$e["[object Object]"]=$e["[object RegExp]"]=$e["[object Set]"]=$e["[object String]"]=$e["[object WeakMap]"]=!1;var we=function(t){return je(t)&&_e(t.length)&&!!$e[ve(t)]};var xe=function(t){return function(e){return t(e)}},ke={exports:{}};!function(t,e){var n=Mt,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r&&n.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(e){}}();t.exports=a}(ke,ke.exports);var Ae=we,Oe=xe,Ee=ke.exports,Se=Ee&&Ee.isTypedArray,Te=Se?Oe(Se):Ae,Ie=Pt,Le=pe,Ne=me,Pe=he.exports,Me=ye,Be=Te,Fe=Object.prototype.hasOwnProperty;var qe=function(t,e){var n=Ne(t),r=!n&&Le(t),o=!n&&!r&&Pe(t),i=!n&&!r&&!o&&Be(t),a=n||r||o||i,c=a?Ie(t.length,String):[],l=c.length;for(var u in t)!e&&!Fe.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Me(u,l))||c.push(u);return c},Ce=Object.prototype;var He=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ce)};var De=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Ue=He,ze=De,Ge=Object.prototype.hasOwnProperty;var Re=Vt,We=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Je=function(t){if(!We(t))return!1;var e=Re(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Ke=ge;var Qe=qe,Ve=function(t){if(!Ue(t))return ze(t);var e=[];for(var n in Object(t))Ge.call(t,n)&&"constructor"!=n&&e.push(n);return e},Xe=function(t){return null!=t&&Ke(t.length)&&!Je(t)};var Ye=Nt,Ze=function(t){return Xe(t)?Qe(t):Ve(t)};var tn=Et,en=function(t){return null==t?[]:Ye(t,Ze(t))};var nn=It,rn=function(t){return tn(en(t))},on=me;var an=function(t){return(on(t)?nn:rn)(t)};function cn(){let t=null,r=1,o=null,i=null,a=[];const l={id:r,active:!0,width:null,top:null,left:null,img:null,meta:{}},u={background:null,markers:[],inactiveOpacity:.6};this.render=(e="body",n=u)=>{if(p(n),t=document.querySelector(e),o=t.getElementsByClassName("marker-map-marker"),i=t.querySelector("#marker-map-markers"),!n.background)throw"background is not set";r=1,a=n.markers.map((t=>(f(t),r++,c(c({},l),t))));const d=`<img id="marker-map-bg" src="${n.background}" width="100%" height="100%" />`;t.innerHTML=`<div id="marker-map"style="width:100%;height:100%;position:relative;margin:0 auto;">${d}<div id="marker-map-markers">${a.map((t=>s(t))).join("")}</div></div>`};const s=(t=l)=>`<img class="marker-map-marker ${!1===t.active?"inactive":""}" data-marker-img="${t.img}" data-marker-id="${t.id}"\n    style="width:${t.width}%;top:${t.top}%;left:${t.left}%;" src="${t.img}" />`,f=(t=l)=>{if(!(t.img&&t.top&&t.left&&t.width))throw"some marker data not correct"},d=(t=null)=>(this.get(t),document.querySelector(`[data-marker-id="${t}"]`));this.add=(t=l)=>{f(t),r++;const e=c(c({},l),t);a.push(e),document.getElementById("marker-map-markers").insertAdjacentHTML("beforeEnd",s(t))},this.remove=t=>{a.filter((e=>e.id!==t)),d(t).remove()},this.removeAll=()=>{a=[],i.innerHTML=""},this.active=(t=null)=>{d(t).classList.remove("inactive")},this.activeAll=()=>{[...o].forEach((t=>{t.classList.remove("inactive")}))},this.inactive=(t=null)=>{d(t).classList.add("inactive")},this.inactiveAll=()=>{[...o].forEach((t=>{t.classList.add("inactive")}))};const p=(t=u)=>{var r;const o=`.marker-map-marker{position:absolute;} .marker-map-marker.inactive{opacity:${(r=c({},u),e(r,n({options:t}))).inactiveOpacity};}`,i=document.createElement("style");i.textContent=o,document.head.append(i)};this.on=(e,n)=>{t.addEventListener(e,(t=>{t.target.dataset.markerId&&n(t,this.get(t.target.dataset.markerId))}))},this.get=(t=null)=>{const e=a.find((e=>e.id==t));if(!e)throw"can not find marker";return e},this.getAll=(t="",e)=>{const n=[...o].filter((e=>{switch(t){case"active":return!e.classList.contains("inactive");case"inactive":return e.classList.contains("inactive");default:return!0}})),r=n.map((t=>({id:t.dataset.markerId,width:parseInt(t.style.width),top:parseInt(t.style.top),left:parseInt(t.style.left),img:t.dataset.markerImg,active:!t.classList.contains("inactive"),meta:a.find((e=>e.id==t.dataset.markerId)).meta||{}})));switch(e){case"json":return r;case"dom":return n;default:return r}},this.destroy=()=>{t.innerHTML="",t=null,r=1,o=null,i=null,a=[],r=1}}export{R as A,u as B,$t as C,y as D,v as E,x as F,l as G,S as H,D as I,N as J,d as K,_ as L,b as M,U as N,O,ft as P,an as Q,Q as R,_t as S,cn as T,M as a,P as b,F as c,A as d,E as e,k as f,q as g,H as h,vt as i,mt as j,I as k,L as l,ht as m,C as n,bt as o,dt as p,pt as q,ct as r,m as s,T as t,st as u,yt as v,lt as w,ut as x,J as y,W as z};
